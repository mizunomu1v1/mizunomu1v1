## ストリームAPI

### 3つの段階がある

#### そもそもストリームとは
- パイプライン処理の入力元のなる要素の集合
- コレクション（リスト）から作ることも、数値の範囲から作ることも可能
- メソッドチェーンで作られるけど、処理は終端操作のタイミングで一気に実行される＝遅延実行！

#### ストリームの構造
- ストリームの生成
  - 生成元を用意するのだ
  - 生成されたものはストリーム型になる
- 中間操作
  - 生成したストリームに対して何らかの処理を実行にゃ！
  - その結果をストリームが受け取る、という仕組み
  - 例えばフィルタ操作（要素の絞り込み）、マップ操作（要素の変換）
  - この時点での戻り値もストリーム型
- 終端操作
  - ストリームから目的のデータを目的の型で取り出すこと！
  - リダクションっての使うよ
  - 最後に一度、必ず実行する

#### 順次ストリームと並列ストリーム
  - 要素を一つずつ順番に取り出して処理するのが順次ストリーム
  - マルチスレッドで並列処理するのが並列ストリーム、順番は保証されない

#### 有限ストリームと無限ストリーム

- 要素の個数が有限か無限か、ってのがあるよ
- コレクションや配列から生成したら、元が有限なので有限ストリーム
- 計算などから生成したら無限なので、無限ストリーム！


### ストリームの生成

#### コレクションからシンプルに生成する

- `list.stream()`でストリームの生成
- `.forEach(処理)`で終端操作、ここではlistの中身を繰り返して処理
- 配列でも同じように生成可能！

#### プリミティブ型から無限に生成する

- 数値型からは`range(int,int)`で範囲指定してストリーム生成できる！

### 中間操作

#### フィルタ操作

- `filter(ラムダ式)`で、ストリームの各要素を費数にbooleanで絞り込む

#### マップ操作

- いつものキーバリューmapではないよ、別の用語として理解しよう
- ここでいうmapは、1つの要素に対する1つの変換！
- `map(ラムダ式)`

```java
list<Integer> list = Array.asList(1,2,3,4,5,6,7,8,9,10);
list.stream()
        .map(X -> X * 2)
        .forEach(System.out::println);
```

- ちなみにこのコロン２つは、渡す引数も実行したい命令も1つの時に使える構文！

#### フラットマップ操作

- 一つの要素に対して複数返ってきたもの、、を最終的に一個に結合して返す
- `flatMap(ラムダ式)`

### 終端操作

#### リダクション

 - 終端操作ではリダクションをする！
 - 例えば合計したり最大値最小値平均値だしたり、はたまた集約したりする操作
 - `forEach()`など

#### 可変リダクション

- 集約、連結操作
- `collect()`
